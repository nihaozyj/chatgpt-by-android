"use strict";(self["webpackChunkeasygpt"]=self["webpackChunkeasygpt"]||[]).push([[511],{8511:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});n(7658);var o=n(3396),l=n(7139),a=n(4870),i=n(2483),s=n(2325),c=n(5216),r=n(9733);const u=e=>((0,o.dD)("data-v-301a5d2e"),e=e(),(0,o.Cn)(),e),d={class:"history-scroll"},m={class:"content"},f=["onClick"],p=u((()=>(0,o._)("div",{class:"end"},null,-1))),g={class:"edit-box"};var h={__name:"Preinstall",setup(e){const t=s.ID,n=(0,i.tv)(),u=(0,a.qj)([]),h=(0,a.qj)({isUpdate:!1,showPopup:!1,id:1,name:"",dialog:""}),v=(0,a.qj)({});function w(e){(0,c.WD)({message:`是否删除名为 “${e.name}” 的预设 ?`}).then((()=>{const t=u.findIndex((t=>t.id==e.id));u.splice(t,1),bScroll.refresh(),(0,r.CF)("删除成功!")})).catch((()=>{}))}function B(e){h.showPopup=!0,h.isUpdate=!0,h.name=e.name,h.dialog=e.dialog,h.id=e.id}function C(){h.showPopup=!0,h.isUpdate=!1,h.name="",h.dialog=""}function b(){(0,c.vC)({message:"长按可删除预设\n\n点击可以修改预设信息\n\n如需要添加预设可点击右下角“创建预设”按钮!"})}function y(){if(""==h.name.trim())return(0,r.CF)("请填写预设名称");if(h.showPopup=!1,h.isUpdate){const e=u.findIndex((e=>e.id==h.id));u[e].dialog=h.dialog.trim(),u[e].name=h.name.trim()}else u.unshift({id:Date.now(),dialog:h.dialog.trim(),name:h.name.trim()})}return(0,o.YP)(u,(e=>{localStorage.preList=JSON.stringify(e)})),(0,o.bv)((()=>{if(localStorage.setting){const e=JSON.parse(localStorage.setting);v.theme=e.theme,v.fontSize=e.fontSize}if(localStorage.preList)try{const e=JSON.parse(localStorage.preList);u.push(...e)}catch(e){console.error(e)}})),(e,i)=>{const s=(0,o.up)("van-icon"),c=(0,o.up)("van-nav-bar"),r=(0,o.up)("van-empty"),k=(0,o.up)("van-text-ellipsis"),S=(0,o.up)("van-button"),x=(0,o.up)("van-field"),W=(0,o.up)("van-cell-group"),D=(0,o.up)("van-popup");return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["container",v.theme?"bright":"dark"]),style:(0,l.j5)("font-size:"+v.fontSize+"em")},[(0,o.Wm)(c,{title:"预设管理",onClickLeft:i[0]||(i[0]=e=>(0,a.SU)(n).back()),onClickRight:b,"left-arrow":""},{right:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{size:"24",name:"question"})])])),_:1}),(0,o._)("div",d,[(0,o._)("div",m,[0==u.length?((0,o.wg)(),(0,o.j4)(r,{key:0,description:"预设为空"})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u,(e=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"item",key:e.id,onClick:t=>B(e)},[(0,o._)("div",null,[(0,o._)("h2",null,(0,l.zw)(e.name),1)]),(0,o.Wm)(k,{rows:"3",content:e.dialog},null,8,["content"])],8,f)),[[(0,a.SU)(t),()=>w(e)]]))),128)),p])]),(0,o.Wm)(S,{icon:"plus",type:"primary",text:"创建预设",onClick:C}),(0,o.Wm)(D,{show:h.showPopup,"onUpdate:show":i[3]||(i[3]=e=>h.showPopup=e),round:"",position:"bottom",style:{height:"50%"}},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(S,{type:"primary",onClick:y,text:h.isUpdate?"保存预设":"创建预设"},null,8,["text"]),(0,o.Wm)(W,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:h.name,"onUpdate:modelValue":i[1]||(i[1]=e=>h.name=e),label:"名称",placeholder:"预设名称"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(W,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:h.dialog,"onUpdate:modelValue":i[2]||(i[2]=e=>h.dialog=e),"show-word-limit":"",rows:"6",autosize:"",label:"留言",type:"textarea",maxlength:"500",placeholder:"请输入预设",style:{"max-height":"13.5em","overflow-y":"scroll"}},null,8,["modelValue"])])),_:1})])])),_:1},8,["show"])],6)}}},v=n(89);const w=(0,v.Z)(h,[["__scopeId","data-v-301a5d2e"]]);var B=w},5216:function(e,t,n){n.d(t,{WD:function(){return L},vC:function(){return A}});var o=n(3396),l=n(2220),a=n(7548),i=n(4870),s=n(9242),c=n(610),r=n(5323),u=n(9951),d=n(6491),m=n(5322),f=n(6048),p=n(4877),g=n(6305),h=n(9545),v=n(1404),w=n(253),B=n(4373);const[C,b]=(0,c["do"])("action-bar"),y=Symbol(C),k={placeholder:Boolean,safeAreaInsetBottom:r.J5};var S=(0,o.aZ)({name:C,props:k,setup(e,{slots:t}){const n=(0,i.iH)(),l=(0,B.J)(n,b),{linkChildren:a}=(0,w.$E)(y);a();const s=()=>{var l;return(0,o.Wm)("div",{ref:n,class:[b(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[null==(l=t.default)?void 0:l.call(t)])};return()=>e.placeholder?l(s):s()}});const x=(0,v.n)(S);var W=n(3444),D=n(6014);const[_,z]=(0,c["do"])("action-bar-button"),P=(0,l.l7)({},D.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var U=(0,o.aZ)({name:_,props:P,setup(e,{slots:t}){const n=(0,D.yj)(),{parent:l,index:a}=(0,w.NB)(y),i=(0,o.Fl)((()=>{if(l){const e=l.children[a.value-1];return!(e&&"isButton"in e)}})),s=(0,o.Fl)((()=>{if(l){const e=l.children[a.value+1];return!(e&&"isButton"in e)}}));return(0,W.F)({isButton:!0}),()=>{const{type:l,icon:a,text:c,color:r,loading:u,disabled:d}=e;return(0,o.Wm)(h.zx,{class:z([l,{last:s.value,first:i.value}]),size:"large",type:l,icon:a,color:r,loading:u,disabled:d,onClick:n},{default:()=>[t.default?t.default():c]})}}});const O=(0,v.n)(U);const[T,H,I]=(0,c["do"])("dialog"),N=(0,l.l7)({},p.W,{title:String,theme:String,width:r.Or,message:[String,Function],callback:Function,allowHtml:Boolean,className:r.Vg,transition:(0,r.SQ)("van-dialog-bounce"),messageAlign:String,closeOnPopstate:r.J5,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:r.J5,closeOnClickOverlay:Boolean}),j=[...p.m,"transition","closeOnPopstate"];var F=(0,o.aZ)({name:T,props:N,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:t,slots:n}){const a=(0,i.iH)(),c=(0,i.qj)({confirm:!1,cancel:!1}),r=e=>t("update:show",e),p=t=>{var n;r(!1),null==(n=e.callback)||n.call(e,t)},v=n=>()=>{e.show&&(t(n),e.beforeClose?(c[n]=!0,(0,u.I)(e.beforeClose,{args:[n],done(){p(n),c[n]=!1},canceled(){c[n]=!1}})):p(n))},w=v("cancel"),B=v("confirm"),C=(0,s.D2)((n=>{var o,i;if(n.target!==(null==(i=null==(o=a.value)?void 0:o.popupRef)?void 0:i.value))return;const s={Enter:e.showConfirmButton?B:l.ZT,Escape:e.showCancelButton?w:l.ZT};s[n.key](),t("keydown",n)}),["enter","esc"]),b=()=>{const t=n.title?n.title():e.title;if(t)return(0,o.Wm)("div",{class:H("header",{isolated:!e.message&&!n.default})},[t])},y=t=>{const{message:n,allowHtml:l,messageAlign:a}=e,i=H("message",{"has-title":t,[a]:a}),s=(0,d.mf)(n)?n():n;return l&&"string"===typeof s?(0,o.Wm)("div",{class:i,innerHTML:s},null):(0,o.Wm)("div",{class:i},[s])},k=()=>{if(n.default)return(0,o.Wm)("div",{class:H("content")},[n.default()]);const{title:t,message:l,allowHtml:a}=e;if(l){const e=!(!t&&!n.title);return(0,o.Wm)("div",{key:a?1:0,class:H("content",{isolated:!e})},[y(e)])}},S=()=>(0,o.Wm)("div",{class:[m.k7,H("footer")]},[e.showCancelButton&&(0,o.Wm)(h.zx,{size:"large",text:e.cancelButtonText||I("cancel"),class:H("cancel"),style:{color:e.cancelButtonColor},loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&(0,o.Wm)(h.zx,{size:"large",text:e.confirmButtonText||I("confirm"),class:[H("confirm"),{[m.a8]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:B},null)]),W=()=>(0,o.Wm)(x,{class:H("footer")},{default:()=>[e.showCancelButton&&(0,o.Wm)(O,{type:"warning",text:e.cancelButtonText||I("cancel"),class:H("cancel"),color:e.cancelButtonColor,loading:c.cancel,disabled:e.cancelButtonDisabled,onClick:w},null),e.showConfirmButton&&(0,o.Wm)(O,{type:"danger",text:e.confirmButtonText||I("confirm"),class:H("confirm"),color:e.confirmButtonColor,loading:c.confirm,disabled:e.confirmButtonDisabled,onClick:B},null)]}),D=()=>n.footer?n.footer():"round-button"===e.theme?W():S();return()=>{const{width:t,title:n,theme:i,message:s,className:c}=e;return(0,o.Wm)(g.GI,(0,o.dG)({ref:a,role:"dialog",class:[H([i]),c],style:{width:(0,f.Nn)(t)},tabindex:0,"aria-labelledby":n||s,onKeydown:C,"onUpdate:show":r},(0,l.ei)(e,j)),{default:()=>[b(),k(),D()]})}}});let J;const V={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let q=(0,l.l7)({},V);function Z(){const e={setup(){const{state:e,toggle:t}=(0,a.o)();return()=>(0,o.Wm)(F,(0,o.dG)(e,{"onUpdate:show":t}),null)}};({instance:J}=(0,a.H)(e))}function A(e){return l._f?new Promise(((t,n)=>{J||Z(),J.open((0,l.l7)({},q,e,{callback:e=>{("confirm"===e?t:n)(e)}}))})):Promise.resolve()}const L=e=>A((0,l.l7)({showCancelButton:!0},e))}}]);
//# sourceMappingURL=511.2e545f67.js.map