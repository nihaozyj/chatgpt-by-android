"use strict";(self["webpackChunkeasygpt"]=self["webpackChunkeasygpt"]||[]).push([[58],{8058:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});n(7658);var o=n(3396),l=n(7139),a=n(4870),i=n(2483),s=n(2325),c=n(5216),r=n(9733);const u=t=>((0,o.dD)("data-v-095dc406"),t=t(),(0,o.Cn)(),t),d={class:"history-scroll"},m={class:"content"},f=["onClick"],p=u((()=>(0,o._)("div",{class:"end"},null,-1))),g={class:"edit-box"};var h={__name:"Preinstall",setup(t){const e=s.I,n=(0,i.tv)(),u=(0,a.qj)([]),h=(0,a.qj)({isUpdate:!1,showPopup:!1,id:1,name:"",dialog:""}),v=(0,a.qj)({});function w(t){(0,c.WD)({message:`是否删除名为 “${t.name}” 的预设 ?`}).then((()=>{const e=u.findIndex((e=>e.id==t.id));u.splice(e,1),bScroll.refresh(),(0,r.CF)("删除成功!")})).catch((()=>{}))}function B(t){h.showPopup=!0,h.isUpdate=!0,h.name=t.name,h.dialog=t.dialog,h.id=t.id}function C(){h.showPopup=!0,h.isUpdate=!1,h.name="",h.dialog=""}function b(){(0,c.vC)({message:"长按可删除预设\n\n点击可以修改预设信息\n\n如需要添加预设可点击右下角“创建预设”按钮!"})}function y(){if(""==h.name.trim())return(0,r.CF)("请填写预设名称");if(h.showPopup=!1,h.isUpdate){const t=u.findIndex((t=>t.id==h.id));u[t].dialog=h.dialog.trim(),u[t].name=h.name.trim()}else u.unshift({id:Date.now(),dialog:h.dialog.trim(),name:h.name.trim()})}return(0,o.YP)(u,(t=>{localStorage.preList=JSON.stringify(t)})),(0,o.bv)((()=>{if(localStorage.setting){const t=JSON.parse(localStorage.setting);v.theme=t.theme,v.fontSize=t.fontSize}if(localStorage.preList)try{const t=JSON.parse(localStorage.preList);u.push(...t)}catch(t){console.error(t)}})),(t,i)=>{const s=(0,o.up)("van-icon"),c=(0,o.up)("van-nav-bar"),r=(0,o.up)("van-empty"),k=(0,o.up)("van-text-ellipsis"),S=(0,o.up)("van-button"),x=(0,o.up)("van-field"),W=(0,o.up)("van-cell-group"),_=(0,o.up)("van-popup");return(0,o.wg)(),(0,o.iD)("div",{class:(0,l.C_)(["container",v.theme?"bright":"dark"]),style:(0,l.j5)("font-size:"+v.fontSize+"em")},[(0,o.Wm)(c,{title:"预设管理",onClickLeft:i[0]||(i[0]=t=>(0,a.SU)(n).back()),onClickRight:b,"left-arrow":""},{right:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(s,{size:"24",name:"question"})])])),_:1}),(0,o._)("div",d,[(0,o._)("div",m,[0==u.length?((0,o.wg)(),(0,o.j4)(r,{key:0,description:"预设为空"})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u,(t=>(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",{class:"item",key:t.id,onClick:e=>B(t)},[(0,o._)("div",null,[(0,o._)("h2",null,(0,l.zw)(t.name),1)]),(0,o.Wm)(k,{rows:"3",content:t.dialog},null,8,["content"])],8,f)),[[(0,a.SU)(e),()=>w(t)]]))),128)),p])]),(0,o.Wm)(S,{icon:"plus",type:"primary",text:"创建预设",onClick:C}),(0,o.Wm)(_,{show:h.showPopup,"onUpdate:show":i[3]||(i[3]=t=>h.showPopup=t),round:"",position:"bottom",style:{height:"50%"}},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.Wm)(S,{type:"primary",onClick:y,text:h.isUpdate?"保存预设":"创建预设"},null,8,["text"]),(0,o.Wm)(W,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:h.name,"onUpdate:modelValue":i[1]||(i[1]=t=>h.name=t),label:"名称",placeholder:"预设名称"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(W,{inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:h.dialog,"onUpdate:modelValue":i[2]||(i[2]=t=>h.dialog=t),"show-word-limit":"",rows:"6",autosize:"",label:"留言",type:"textarea",maxlength:"500",placeholder:"请输入预设",style:{"max-height":"13.5em","overflow-y":"scroll"}},null,8,["modelValue"])])),_:1})])])),_:1},8,["show"])],6)}}},v=n(89);const w=(0,v.Z)(h,[["__scopeId","data-v-095dc406"]]);var B=w},5216:function(t,e,n){n.d(e,{WD:function(){return L},vC:function(){return A}});var o=n(3396),l=n(2220),a=n(7548),i=n(4870),s=n(9242),c=n(610),r=n(5323),u=n(9951),d=n(6491),m=n(5322),f=n(6048),p=n(4877),g=n(6305),h=n(9545),v=n(1404),w=n(253),B=n(4373);const[C,b]=(0,c["do"])("action-bar"),y=Symbol(C),k={placeholder:Boolean,safeAreaInsetBottom:r.J5};var S=(0,o.aZ)({name:C,props:k,setup(t,{slots:e}){const n=(0,i.iH)(),l=(0,B.J)(n,b),{linkChildren:a}=(0,w.$E)(y);a();const s=()=>{var l;return(0,o.Wm)("div",{ref:n,class:[b(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[null==(l=e.default)?void 0:l.call(e)])};return()=>t.placeholder?l(s):s()}});const x=(0,v.n)(S);var W=n(3444),_=n(6014);const[D,z]=(0,c["do"])("action-bar-button"),P=(0,l.l7)({},_.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var U=(0,o.aZ)({name:D,props:P,setup(t,{slots:e}){const n=(0,_.yj)(),{parent:l,index:a}=(0,w.NB)(y),i=(0,o.Fl)((()=>{if(l){const t=l.children[a.value-1];return!(t&&"isButton"in t)}})),s=(0,o.Fl)((()=>{if(l){const t=l.children[a.value+1];return!(t&&"isButton"in t)}}));return(0,W.F)({isButton:!0}),()=>{const{type:l,icon:a,text:c,color:r,loading:u,disabled:d}=t;return(0,o.Wm)(h.zx,{class:z([l,{last:s.value,first:i.value}]),size:"large",type:l,icon:a,color:r,loading:u,disabled:d,onClick:n},{default:()=>[e.default?e.default():c]})}}});const O=(0,v.n)(U);const[T,H,I]=(0,c["do"])("dialog"),N=(0,l.l7)({},p.W,{title:String,theme:String,width:r.Or,message:[String,Function],callback:Function,allowHtml:Boolean,className:r.Vg,transition:(0,r.SQ)("van-dialog-bounce"),messageAlign:String,closeOnPopstate:r.J5,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:r.J5,closeOnClickOverlay:Boolean}),j=[...p.m,"transition","closeOnPopstate"];var F=(0,o.aZ)({name:T,props:N,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:e,slots:n}){const a=(0,i.iH)(),c=(0,i.qj)({confirm:!1,cancel:!1}),r=t=>e("update:show",t),p=e=>{var n;r(!1),null==(n=t.callback)||n.call(t,e)},v=n=>()=>{t.show&&(e(n),t.beforeClose?(c[n]=!0,(0,u.I)(t.beforeClose,{args:[n],done(){p(n),c[n]=!1},canceled(){c[n]=!1}})):p(n))},w=v("cancel"),B=v("confirm"),C=(0,s.D2)((n=>{var o,i;if(n.target!==(null==(i=null==(o=a.value)?void 0:o.popupRef)?void 0:i.value))return;const s={Enter:t.showConfirmButton?B:l.ZT,Escape:t.showCancelButton?w:l.ZT};s[n.key](),e("keydown",n)}),["enter","esc"]),b=()=>{const e=n.title?n.title():t.title;if(e)return(0,o.Wm)("div",{class:H("header",{isolated:!t.message&&!n.default})},[e])},y=e=>{const{message:n,allowHtml:l,messageAlign:a}=t,i=H("message",{"has-title":e,[a]:a}),s=(0,d.mf)(n)?n():n;return l&&"string"===typeof s?(0,o.Wm)("div",{class:i,innerHTML:s},null):(0,o.Wm)("div",{class:i},[s])},k=()=>{if(n.default)return(0,o.Wm)("div",{class:H("content")},[n.default()]);const{title:e,message:l,allowHtml:a}=t;if(l){const t=!(!e&&!n.title);return(0,o.Wm)("div",{key:a?1:0,class:H("content",{isolated:!t})},[y(t)])}},S=()=>(0,o.Wm)("div",{class:[m.k7,H("footer")]},[t.showCancelButton&&(0,o.Wm)(h.zx,{size:"large",text:t.cancelButtonText||I("cancel"),class:H("cancel"),style:{color:t.cancelButtonColor},loading:c.cancel,disabled:t.cancelButtonDisabled,onClick:w},null),t.showConfirmButton&&(0,o.Wm)(h.zx,{size:"large",text:t.confirmButtonText||I("confirm"),class:[H("confirm"),{[m.a8]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:c.confirm,disabled:t.confirmButtonDisabled,onClick:B},null)]),W=()=>(0,o.Wm)(x,{class:H("footer")},{default:()=>[t.showCancelButton&&(0,o.Wm)(O,{type:"warning",text:t.cancelButtonText||I("cancel"),class:H("cancel"),color:t.cancelButtonColor,loading:c.cancel,disabled:t.cancelButtonDisabled,onClick:w},null),t.showConfirmButton&&(0,o.Wm)(O,{type:"danger",text:t.confirmButtonText||I("confirm"),class:H("confirm"),color:t.confirmButtonColor,loading:c.confirm,disabled:t.confirmButtonDisabled,onClick:B},null)]}),_=()=>n.footer?n.footer():"round-button"===t.theme?W():S();return()=>{const{width:e,title:n,theme:i,message:s,className:c}=t;return(0,o.Wm)(g.GI,(0,o.dG)({ref:a,role:"dialog",class:[H([i]),c],style:{width:(0,f.Nn)(e)},tabindex:0,"aria-labelledby":n||s,onKeydown:C,"onUpdate:show":r},(0,l.ei)(t,j)),{default:()=>[b(),k(),_()]})}}});let J;const V={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let q=(0,l.l7)({},V);function Z(){const t={setup(){const{state:t,toggle:e}=(0,a.o)();return()=>(0,o.Wm)(F,(0,o.dG)(t,{"onUpdate:show":e}),null)}};({instance:J}=(0,a.H)(t))}function A(t){return l._f?new Promise(((e,n)=>{J||Z(),J.open((0,l.l7)({},q,t,{callback:t=>{("confirm"===t?e:n)(t)}}))})):Promise.resolve()}const L=t=>A((0,l.l7)({showCancelButton:!0},t))}}]);
//# sourceMappingURL=58.b7ade6da.js.map